// Custom Bootstrap variables (must be defined before importing Bootstrap)
$header-path: "/assets/img/header.jpg";
$blue: #337ab7;
$enable-shadows: true;
$enable-gradients: true;
$tooltip-max-width: 350px;
$color-mode-type: media-query;

// Import Bootstrap
// Note: Bootstrap 5.3.x still uses @import internally. The deprecation warning
// is silenced via sass-loader configuration until Bootstrap migrates to @use.
@import "~bootstrap/scss/bootstrap";

// Syntax highlighting styles
@import 'highlighting';

// Dark and light mode syntax highlighting colors
// Each partial now contains its own @media query wrapper
@import 'base16.dark';
@import 'base16.light';

abbr[data-bs-original-title] {
    @extend abbr, [title]
}

.footnotes {
    @extend small;
    @extend .border-top;
    @extend .pt-3;
}

.footnotes::before {
    content: "Notes:";
    @extend .mb-3;
    @extend .d-block;
}

.footnotes ol {
    @extend .ps-3
}

.footnotes ol li p {
    @extend .mb-1
}

.hero-unit {
    background-image: url($header-path);
    background-size: cover;
    background-position: top left;
    height: 400px;
}

.gist {
    .gist-it-gist .gist-file .gist-data,
    .gist-meta {
        background: #fcfcff !important;
    }

    .pl-c {
        color: #757775 !important;
    }

    .pl-c1 {
        color: #007faa !important;
    }
}

.min-y-5 {
    min-height: 5em;
}

blockquote {
    border-left: 5px solid $gray-300;
    padding-left: 1em;
}

.avatar {
    @extend .img-fluid;
    @extend .rounded;
}

// Footer link accessibility fix
// Bootstrap's link-secondary uses gray-600 (#6c757d) which has ~4.48:1 contrast ratio
// against white, below WCAG AA requirement of 4.5:1. Using gray-700 (#495057) provides
// ~7.13:1 contrast ratio, meeting both WCAG AA and AAA requirements.
footer .link-secondary,
nav .border-top .link-secondary {
    color: var(--bs-gray-700) !important;

    &:hover,
    &:focus {
        color: var(--bs-gray-800) !important;
    }
}

// Dark mode footer link adjustment
@media (prefers-color-scheme: dark) {
    footer .link-secondary,
    nav .border-top .link-secondary {
        color: var(--bs-gray-400) !important;

        &:hover,
        &:focus {
            color: var(--bs-gray-300) !important;
        }
    }
}

// Accessibility: Respect prefers-reduced-motion
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

// Accessibility: Enhanced focus indicators
:focus-visible {
    outline: 2px solid var(--bs-primary);
    outline-offset: 2px;
    border-radius: 2px;
}

// Skip link for keyboard navigation
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--bs-primary);
    color: white;
    padding: 8px;
    z-index: 100;
    text-decoration: none;

    &:focus {
        top: 0;
    }
}

// Ensure images don't cause layout shift
img {
    max-width: 100%;
    height: auto;
}

// Core Web Vitals: Prevent layout shift from lazy-loaded images
img[loading="lazy"] {
    min-height: 100px; // Reserve space for lazy-loaded images
}