// Main stylesheet for Astro build
// This imports Bootstrap and custom styles for the site

// Custom Bootstrap variables (must be defined before importing Bootstrap)
$header-path: "/assets/img/header.jpg";
$blue: #337ab7;
$enable-shadows: true;
$enable-gradients: true;
$tooltip-max-width: 350px;
$color-mode-type: media-query;

// Import Bootstrap
// Note: Bootstrap 5.3.x still uses @import internally. The deprecation warning
// is silenced via Vite/Sass configuration (quietDeps) until Bootstrap migrates to @use.
@import 'bootstrap/scss/bootstrap';

// Syntax highlighting styles
@import '../../sass/highlighting';

// Dark and light mode syntax highlighting colors
// Each partial now contains its own @media query wrapper
@import '../../sass/base16.dark';
@import '../../sass/base16.light';

abbr[data-bs-original-title] {
    @extend abbr, [title]
}

.footnotes {
    @extend small;
    @extend .border-top;
    @extend .pt-3;
    margin-left: -15px;
    margin-right: -15px;
    padding-left: 15px;
    padding-right: 15px;
}

.footnotes::before {
    content: "Notes:";
    @extend .mb-3;
    @extend .d-block;
}

.footnotes ol {
    @extend .ps-3
}

.footnotes ol li p {
    @extend .mb-1
}

.hero-unit {
    background-image: url($header-path);
    background-size: cover;
    background-position: top left;
    height: 400px;
}

.gist {
    .gist-it-gist .gist-file .gist-data,
    .gist-meta {
        background: #fcfcff !important;
    }

    .pl-c {
        color: #757775 !important;
    }

    .pl-c1 {
        color: #007faa !important;
    }
}

.min-y-5 {
    min-height: 5em;
}

blockquote {
    border-left: 5px solid $gray-300;
    padding-left: 1em;
}

.avatar {
    @extend .img-fluid;
    @extend .rounded;
}

// Footer link accessibility fix
// Bootstrap's link-secondary uses gray-600 (#6c757d) which has ~4.48:1 contrast ratio
// against white, below WCAG AA requirement of 4.5:1. Using gray-700 (#495057) provides
// ~7.13:1 contrast ratio, meeting both WCAG AA and AAA requirements.
footer .link-secondary,
nav .border-top .link-secondary {
    color: var(--bs-gray-700) !important;

    &:hover,
    &:focus {
        color: var(--bs-gray-800) !important;
    }
}

// Dark mode footer link adjustment
@media (prefers-color-scheme: dark) {
    footer .link-secondary,
    nav .border-top .link-secondary {
        color: var(--bs-gray-400) !important;

        &:hover,
        &:focus {
            color: var(--bs-gray-300) !important;
        }
    }
}

// Header anchor links styling
// These styles match the behavior of anchor-js used in Jekyll/Next.js
.anchor-link {
    text-decoration: none;
    margin-left: 0.25rem;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    
    .anchor-icon {
        color: $blue;
        font-weight: normal;
    }
}

// Show anchor links on hover or focus
h1, h2, h3, h4, h5, h6 {
    position: relative;
    
    &:hover .anchor-link,
    & .anchor-link:focus {
        opacity: 1;
    }
}
