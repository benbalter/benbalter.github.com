---
import BaseLayout from '../layouts/BaseLayout.astro';
import FeatureCard from '../components/FeatureCard.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const title = 'Ben Balter';
const description = 'Product Manager, Attorney, and Open Source Advocate';

// Get all published posts, sorted by date (newest first)
const allPosts = await getCollection('posts', ({ data }: CollectionEntry<'posts'>) => {
  return data.published !== false;
});

// Sort posts by slug (which contains date in Jekyll format)
const posts = allPosts.sort((a: CollectionEntry<'posts'>, b: CollectionEntry<'posts'>) => 
  b.slug.localeCompare(a.slug)
).slice(0, 5);
---

<BaseLayout title={title} description={description}>
  <h1>Welcome to Ben Balter's Astro Site</h1>
  
  <section>
    <h2>About This Build</h2>
    <p>
      This is an Astro implementation of Ben Balter's personal website, 
      running alongside the existing Jekyll and Next.js versions during development.
    </p>
    
    <p>
      Astro is a modern static site generator that delivers lightning-fast performance
      with zero JavaScript by default. It supports multiple frameworks and provides
      excellent developer experience.
    </p>
  </section>
  
  <section>
    <h2>Quick Links</h2>
    <ul>
      <li><a href="/about/">About Me</a></li>
      <li><a href="/resume/">Resume</a></li>
      <li><a href="https://github.com/benbalter" target="_blank" rel="noopener noreferrer">GitHub Profile</a></li>
    </ul>
  </section>
  
  <section>
    <h2>Tech Stack Highlights</h2>
    <div class="feature-grid">
      <FeatureCard
        emoji="âš¡"
        title="Static Site Generation"
        description="All pages pre-rendered at build time for maximum performance"
      />
      <FeatureCard
        emoji="ðŸ”§"
        title="TypeScript Support"
        description="Type-safe component development with full IntelliSense"
      />
      <FeatureCard
        emoji="ðŸš€"
        title="GitHub Pages Ready"
        description="Optimized for static hosting with proper URL structure"
      />
      <FeatureCard
        emoji="ðŸ“¦"
        title="Zero JS by Default"
        description="Ship only the JavaScript you need, nothing more"
      />
    </div>
  </section>
<<<<<<< HEAD
=======
  
  <section>
    <h2>Recent Posts</h2>
    {posts.length > 0 ? (
      <ul class="post-list">
        {posts.map((post: CollectionEntry<'posts'>) => (
          <li>
            <a href={`/posts/${post.slug}/`}>
              <h3>{post.data.title}</h3>
              <p>{post.data.description}</p>
            </a>
          </li>
        ))}
      </ul>
    ) : (
      <p>No posts available yet. Check out the example posts in <code>src/content/posts/</code>!</p>
    )}
  </section>
>>>>>>> main
</BaseLayout>

<style>
  h1 {
    color: #0366d6;
    margin-bottom: 1rem;
  }
  
  section {
    margin-bottom: 2rem;
  }
  
  h2 {
    color: #333;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  ul {
    list-style-type: disc;
    padding-left: 2rem;
  }
  
  li {
    margin-bottom: 0.5rem;
  }
  
  a {
    color: #0366d6;
    text-decoration: none;
  }
  
  a:hover {
    text-decoration: underline;
  }
  
  .feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
  }
<<<<<<< HEAD
=======
  
  .post-list {
    list-style: none;
    padding: 0;
    margin: 1rem 0;
  }
  
  .post-list li {
    margin-bottom: 2rem;
    padding: 1rem;
    border: 1px solid #e1e4e8;
    border-radius: 6px;
    transition: box-shadow 0.2s;
  }
  
  .post-list li:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .post-list a {
    text-decoration: none;
    color: inherit;
  }
  
  .post-list h3 {
    margin: 0 0 0.5rem 0;
    color: #0366d6;
  }
  
  .post-list p {
    margin: 0;
    color: #586069;
  }
>>>>>>> main
</style>
